@tailwind base;
@tailwind components;
@tailwind utilities;

/* Article embeds - force standard 16:9 ratio */
.gi-prose .embed-responsive,
.gi-prose .wp-block-embed.is-type-video .wp-block-embed__wrapper,
.gi-prose .wp-block-embed.is-provider-youtube .wp-block-embed__wrapper,
.gi-prose .wp-block-embed.is-provider-vimeo .wp-block-embed__wrapper,
.gi-prose .wp-block-video {
  position: relative;
  width: 100%;
  aspect-ratio: 16 / 9;
}

.gi-prose .wp-block-embed__wrapper iframe,
.gi-prose .wp-block-video video {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
}

/* General iframe fallback */
.gi-prose iframe { max-width: 100%; }

/* Reserve space for fixed TOC on very wide screens without shifting article */
@media (min-width: 1280px) {
  .gi-prose-container { position: relative; }
}

/* GI global utilities and helpers */
.gi-blueprint{position:relative;background-color:#fff;isolation:isolate;}
.gi-blueprint::before{content:"";position:absolute;inset:-1px;z-index:-1;background:
  linear-gradient(to right, rgba(6,30,75,.12) 1px, transparent 1px) 0 0/24px 24px,
  linear-gradient(to bottom, rgba(6,30,75,.12) 1px, transparent 1px) 0 0/24px 24px,
  linear-gradient(to right, rgba(6,30,75,.2) 1px, transparent 1px) 0 0/96px 96px,
  linear-gradient(to bottom, rgba(6,30,75,.2) 1px, transparent 1px) 0 0/96px 96px;opacity:.6;}
@media (prefers-reduced-motion:no-preference){.gi-blueprint::before{animation:drift 12s ease-in-out infinite;}}

.btn-primary{@apply inline-flex items-center justify-center rounded-xl px-5 py-3 bg-gi-green text-gi-white font-semibold hover:bg-gi-green/85 focus:outline-none focus:ring-2 focus:ring-gi-green focus:ring-offset-1;}
.btn-secondary{@apply inline-flex items-center justify-center rounded-xl px-5 py-3 border-2 border-gi-fog text-gi-text font-semibold hover:bg-gi-pink/50 hover:text-gi-white focus:outline-none focus:ring-2 focus:ring-gi-navy focus:ring-offset-1;}

.kpi-chip{@apply inline-flex items-center gap-2 rounded-xl px-3 py-2 bg-black/5;}
.kpi-chip .kpi-bar{@apply h-3 w-1.5 rounded bg-gi-pink;}
.kpi-chip .kpi-val{@apply font-mono font-bold text-gi-black;}

.on-dark h1,
.on-dark .heading,
.on-dark .title { @apply text-white; }

.on-dark p,
.on-dark .subhead,
.on-dark .body { @apply text-white/80; }

.on-dark .btn-secondary { @apply border-white/30 text-white hover:bg-white/10; }
.on-dark .kpi-val { @apply text-white; }

.on-light h1,.on-light .heading,.on-light .title { @apply text-gi-text; }
.on-light p,.on-light .subhead,.on-light .body { @apply text-gi-gray; }

@layer components {
  .link-underline { position: relative; }
  .link-underline::after {
    content: ""; position: absolute; left: 0; right: 0; bottom: -2px; height: 2px;
    background-image: linear-gradient(to right, #5AAD5A, #C40084, #5AAD5A);
    transform: scaleX(0); transform-origin: left; transition: transform .18s ease-out;
  }
  .link-underline:hover::after { transform: scaleX(1); }

  /* HubSpot form normalization to match GI styles */
  .gi-hubspot .hs-form { @apply grid gap-4; }
  .gi-hubspot .hs-form fieldset { @apply border-0 p-0 m-0; }
  .gi-hubspot .hs-form .hs-form-field { @apply w-full; }
  .gi-hubspot .hs-form .hs-form-field label { @apply block text-sm font-medium text-gi-text; }
  .gi-hubspot .hs-form .hs-input { @apply mt-1 w-full rounded-xl border border-gi-fog bg-white px-3 py-2 text-gi-text placeholder-gi-gray/70 focus:outline-none focus:ring-2 focus:ring-gi-navy focus:ring-offset-1; }
  .gi-hubspot .hs-form textarea.hs-input { @apply min-h-[140px]; }
  .gi-hubspot .hs-form .inputs-list { @apply mt-1 space-y-2; }
  .gi-hubspot .hs-form .inputs-list li label { @apply inline-flex items-center gap-2 text-sm text-gi-text; }
  .gi-hubspot .hs-form .inputs-list input { @apply rounded border-gi-fog text-gi-text; }
  .gi-hubspot .hs-error-msgs { @apply mt-1 text-sm text-red-600; }
  .gi-hubspot .hs-form .legal-consent-container { @apply text-sm text-gi-gray; }
  .gi-hubspot .hs-submit input[type="submit"],
  .gi-hubspot input.hs-button,
  .gi-hubspot .actions .hs-button { @apply inline-flex items-center justify-center rounded-xl px-5 py-3 bg-gi-green text-gi-white font-semibold hover:bg-gi-green/85 focus:outline-none focus:ring-2 focus:ring-gi-green focus:ring-offset-1; }
  /* two-column rows */
  .gi-hubspot .hs-form fieldset.form-columns-2 { display: grid; grid-template-columns: 1fr; gap: 1rem; }
  @screen md { .gi-hubspot .hs-form fieldset.form-columns-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); } }
}

/* 3D flip helpers used by OfferTiles */
.rotate-y-180 { transform: rotateY(180deg); }
[transform-style\:preserve-3d] { transform-style: preserve-3d; }
[backface-visibility\:hidden] { backface-visibility: hidden; }

html,
body {
  padding: 0;
  margin: 0;
  font-family:
    -apple-system,
    BlinkMacSystemFont,
    Segoe UI,
    Roboto,
    Oxygen,
    Ubuntu,
    Cantarell,
    Fira Sans,
    Droid Sans,
    Helvetica Neue,
    sans-serif;
  overflow-x: hidden; /* prevent stray horizontal scroll */
  width: 100%;
  -webkit-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

a {
  color: inherit;
  text-decoration: none;
}

* {
  box-sizing: border-box;
}

#__next {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  overflow-x: hidden; /* guard against children overflow */
}

@supports (height: 100dvh) {
  #__next { min-height: 100dvh; }
}

.container {
  width: 100%;
  max-width: 60rem;
  margin-left: auto;
  margin-right: auto;
}
